{% extends 'users/layout1.html' %}
{% load static %}
{% load crispy_forms_field %}
{% block extra_css_lib %}

    <!-- Bootstrap Material Datetime Picker Css -->
    <link href="{% static 'plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.css' %}" rel="stylesheet" />
    <!-- Bootstrap DatePicker Css -->
    <link href="{% static 'plugins/bootstrap-datepicker/css/bootstrap-datepicker.css' %}" rel="stylesheet" />
    <!-- Wait Me Css -->
    <link href="{% static 'plugins/waitme/waitMe.css' %}" rel="stylesheet" />
    <!-- Sweet Alert Css -->
    <link href="{% static 'plugins/sweetalert/sweetalert.css' %}" rel="stylesheet" />
    <!-- Bootstrap Select Css -->
    <link href="{% static 'plugins/bootstrap-select/css/bootstrap-select.css' %}" rel="stylesheet" />
     <!-- Colorpicker Css -->
    <link href="{% static 'plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.css'%}" rel="stylesheet" />
    <!-- Multi Select Css -->
    <link href="{% static 'plugins/multi-select/css/multi-select.css' %}" rel="stylesheet">
    <!-- Bootstrap Spinner Css -->
    <link href="{% static 'plugins/jquery-spinner/css/bootstrap-spinner.css'%}" rel="stylesheet">
    <!-- Bootstrap Tagsinput Css -->
    <link href="{% static 'plugins/bootstrap-tagsinput/bootstrap-tagsinput.css'%}" rel="stylesheet">
     <!-- Dropzone Css -->
    <link href="{% static 'plugins/dropzone/dropzone.css'%}" rel="stylesheet">
<style>
    /* CSS comes here */
    #video {
        border: 1px solid black;
        width: 320px;
        height: 240px;
    }

    #photo {
        border: 1px solid black;
        width: 320px;
        height: 240px;
    }

    #canvas {
        display: none;
    }

    .camera {
        width: 340px;
        display: inline-block;
    }

    .output {
        width: 340px;
        display: inline-block;
    }

    #startbutton {
        display: block;
        position: relative;
        margin-left: auto;
        margin-right: auto;
        bottom: 36px;
        padding: 5px;
        background-color: #6a67ce;
        border: 1px solid rgba(255, 255, 255, 0.7);
        font-size: 14px;
        color: rgba(255, 255, 255, 1.0);
        cursor: pointer;
    }

    .contentarea {
        font-size: 16px;
        font-family: Arial;
        text-align: center;
    }
    </style>

{% endblock %}
{% block body %}
<div class="row clearfix">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <h2>Student Personal Information</h2>
                            <ul class="header-dropdown m-r--5">

                            </ul>
                        </div>
                        <div class="body">
                            <form id="form_validation" method="POST" enctype="multipart/form-data" novalidate="novalidate">
                                {% csrf_token %}
                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Student First Name</label>
                                        {% crispy_field form.first_name %}
                                    </div>
                                    {% if form.student_first_name.errors %}
                                        {% for error in form.first_name.errors %}
                                            <label id="student_first_name-error" class="error" for="student_first_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Student Last Name</label>
                                        {% crispy_field form.last_name %}
                                    </div>
                                    {% if form.last_name.errors %}
                                        {% for error in form.last_name.errors %}
                                            <label id="student_last_name-error" class="error" for="student_last_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Student Middle Name</label>
                                        {% crispy_field form.middle_name %}
                                    </div>
                                    {% if form.middle_name.errors %}
                                        {% for error in form.middle_name.errors %}
                                            <label id="student_second_name-error" class="error" for="student_second_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                 <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Father First Name</label>
                                        {% crispy_field form.father_firstname %}
                                    </div>
                                    {% if form.father_firstname.errors %}
                                        {% for error in form.father_firstname.errors %}
                                            <label id="father_first_name-error" class="error" for="father_first_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Father Second Name</label>
                                        {% crispy_field form.father_second_name %}
                                    </div>
                                    {% if form.father_second_name.errors %}
                                        {% for error in form.father_second_name.errors %}
                                            <label id="father_second_name-error" class="error" for="father_second_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Father Last Name</label>
                                        {% crispy_field form.father_last_name %}
                                    </div>
                                    {% if form.father_last_name.errors %}
                                        {% for error in form.father_last_name.errors %}
                                            <label id="father_last_name-error" class="error" for="father_last_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">House No or Building Name</label>
                                        {% crispy_field form.Building_name %}
                                    </div>
                                    {% if form.Building_name.errors %}
                                        {% for error in form.Building_name.errors %}
                                            <label id="Building_name-error" class="error" for="Building_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">State. Name</label>
                                        {% crispy_field form.state_name %}
                                    </div>
                                    {% if form.state_name.errors %}
                                        {% for error in form.state_name.errors %}
                                            <label id="st_name-error" class="error" for="st_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Area Name</label>
                                        {% crispy_field form.area_name %}
                                    </div>
                                    {% if form.area_name.errors %}
                                        {% for error in form.area_name.errors %}
                                            <label id="area_name-error" class="error" for="area_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">City Name</label>
                                        {% crispy_field form.city %}
                                    </div>
                                    {% if form.city.errors %}
                                        {% for error in form.city.errors %}
                                            <label id="city_name-error" class="error" for="city_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Country Name</label>
                                        {% crispy_field form.country %}
                                    </div>
                                    {% if form.country.errors %}
                                        {% for error in form.country.errors %}
                                            <label id="country_name-error" class="error" for="country_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                 <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Mobile Number</label>
                                        {% crispy_field form.ph_number %}
                                    </div>
                                    {% if form.ph_number.errors %}
                                        {% for error in form.ph_number.errors %}
                                            <label id="mobile_number-error" class="error" for="mobile_number"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Phone Number House</label>
                                        {% crispy_field form.ph_number_house %}
                                    </div>
                                    {% if form.ph_number_house.errors %}
                                        {% for error in form.ph_number_house.errors %}
                                            <label id="phone_number_house-error" class="error" for="phone_number_house"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        {% crispy_field form.birthdate 'class' 'datetimepicker' 'placeholder' 'select date' %}
                                    </div>
                                    {% if form.birthdate.errors %}
                                        {% for error in form.birthdate.errors %}
                                            <label id="birthdate-error" class="error" for="birthdate"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <p>
                                          <b>Gender</b>
                                        </p>
                                        {% crispy_field form.gender 'class' 'btn-group bootstrap-select form-control show-tick' %}
                                    </div>
                                    {% if form.gender.errors %}
                                        {% for gender in form.gender.errors %}
                                            <label id="gender-error" class="error" for="gender"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">School Name or College Name</label>
                                        {% crispy_field form.Schoolname %}
                                    </div>
                                    {% if form.Schoolname.errors %}
                                        {% for error in form.Schoolname.errors %}
                                            <label id="school_college_name-error" class="error" for="school_college_name"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Education</label>
                                        {% crispy_field form.education %}
                                    </div>
                                    {% if form.education.errors %}
                                        {% for error in form.education.errors %}
                                            <label id="education-error" class="error" for="education"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <div class="contentarea">
                                    <div class="camera">
                                        <video id="video">Video stream not available.</video>
                                    </div>
                                    <div><button id="startbutton">Take photo</button></div>
                                    <canvas id="canvas"></canvas>
                                    <div class="output">
                                        <img id="photo" alt="The screen capture will appear in this box.">
                                    </div>
                                </div>



                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Email Id</label>
                                        {% crispy_field form.email %}
                                    </div>
                                    {% if form.email.errors %}
                                        {% for error in form.email.errors %}
                                            <label id="email_id-error" class="error" for="email_id"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                <div class="form-group form-float">
                                    <div class="form-line">
                                        <label class="form-label">Inquiry Id</label>
                                        {% crispy_field form.inquiry_id %}
                                    </div>
                                    {% if form.inquiry_id.errors %}
                                        {% for error in form.inquiry_id.errors %}
                                            <label id="inquiry_id-error" class="error" for="inquiry_id"><b>{{ error }}</b></label>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                                <button class="btn btn-primary waves-effect" type="submit">SUBMIT</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
{% endblock %}
{% block extra_js_lib %}
     <!-- Jquery Validation Plugin Css -->
    <script src="{% static 'plugins/jquery-validation/jquery.validate.js' %}"></script>

    <!-- JQuery Steps Plugin Js -->
    <script src="{% static 'plugins/jquery-steps/jquery.steps.js' %}"></script>

    <!-- Sweet Alert Plugin Js -->
    <script src="{% static 'plugins/sweetalert/sweetalert.min.js' %}"></script>

    <!-- Custom Js -->
    <script src="{% static 'js/pages/forms/form-validation.js' %}"></script>

    <!-- Autosize Plugin Js -->
    <script src="{% static 'plugins/autosize/autosize.js' %}"></script>

     <!-- Jquery Spinner Plugin Js -->
    <script src="{% static 'plugins/jquery-spinner/js/jquery.spinner.js'%}"></script>

    <!-- Moment Plugin Js -->
    <script src="{% static 'plugins/momentjs/moment.js' %}"></script>

    <!-- Bootstrap Material Datetime Picker Plugin Js -->
    <script src="{% static 'plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js' %}"></script>

    <!-- Bootstrap Datepicker Plugin Js -->
    <script src="{% static 'plugins/bootstrap-datepicker/js/bootstrap-datepicker.js' %}"></script>

     <!-- Bootstrap Tags Input Plugin Js -->
    <script src="{% static 'plugins/bootstrap-tagsinput/bootstrap-tagsinput.js'%}"></script>

    <!-- noUISlider Plugin Js -->
    <script src="{% static 'plugins/nouislider/nouislider.js'%}"></script>

    <!-- Custom Js -->
    <script src="{% static 'js/pages/forms/basic-form-elements.js' %}"></script>

<script>
    /* JS comes here */
    (function() {

        var width = 320; // We will scale the photo width to this
        var height = 0; // This will be computed based on the input stream

        var streaming = false;

        var video = null;
        var canvas = null;
        var photo = null;
        var startbutton = null;

        function startup() {
            video = document.getElementById('video');
            canvas = document.getElementById('canvas');
            photo = document.getElementById('photo');
            startbutton = document.getElementById('startbutton');

            navigator.mediaDevices.getUserMedia({
                    video: true,
                    audio: false
                })
                .then(function(stream) {
                    video.srcObject = stream;
                    video.play();
                })
                .catch(function(err) {
                    console.log("An error occurred: " + err);
                });

            video.addEventListener('canplay', function(ev) {
                if (!streaming) {
                    height = video.videoHeight / (video.videoWidth / width);

                    if (isNaN(height)) {
                        height = width / (4 / 3);
                    }

                    video.setAttribute('width', width);
                    video.setAttribute('height', height);
                    canvas.setAttribute('width', width);
                    canvas.setAttribute('height', height);
                    streaming = true;
                }
            }, false);

            startbutton.addEventListener('click', function(ev) {
                takepicture();
                ev.preventDefault();
            }, false);

            clearphoto();
        }


        function clearphoto() {
            var context = canvas.getContext('2d');
            context.fillStyle = "#AAA";
            context.fillRect(0, 0, canvas.width, canvas.height);

            var data = canvas.toDataURL('image/png');
            photo.setAttribute('src', data);
        }

        function takepicture() {
            var context = canvas.getContext('2d');
            if (width && height) {
                canvas.width = width;
                canvas.height = height;
                context.drawImage(video, 0, 0, width, height);

                var data = canvas.toDataURL('image/png');
                photo.setAttribute('src', data);
                //photo.save();
            } else {
                clearphoto();
            }
        }

        window.addEventListener('load', startup, false);
    })();
    </script>

<script>
    $('#id_birthdate').bootstrapMaterialDatePicker({ weekStart : 0, time: false });

</script>

{% endblock %}